<form [formGroup]="form" class="row">
  <div class="col-12">
    <div class="row">
      <div class="col-lg-8 col-md-12">
        <h3>Personal</h3>
        <div class="row">
          <div class="col-md-6 form-group">
            <mat-form-field class="mat-form-field" appearance="outline">
              <mat-label>Name</mat-label>
              <input matInput
                     readonly="true"
                     formControlName="name"
                     [value]="checkEmpty(accountInfo.name)"
                     type="text"
                     class="mat-input"
                     placeholder="Name">
            </mat-form-field>
            <mat-form-field class="mat-form-field" appearance="outline">
              <mat-label>City</mat-label>
              <input matInput
                     readonly="true"
                     formControlName="city"
                     [value]="checkEmpty(accountInfo.cityResidentialAddress)"
                     type="text"
                     class="mat-input"
                     placeholder="City">
            </mat-form-field>
            <mat-form-field class="mat-form-field" appearance="outline">
              <mat-label>Post code</mat-label>
              <input matInput
                     readonly="true"
                     formControlName="postCode"
                     [value]="checkEmpty(accountInfo.postalCode)"
                     type="text"
                     class="mat-input"
                     placeholder="Post code">
            </mat-form-field>
          </div>
          <div class="col-md-6 form-group">
            <mat-form-field class="mat-form-field" appearance="outline">
              <mat-label>Country</mat-label>
              <input matInput
                     readonly="true"
                     formControlName="country"
                     [value]="checkEmpty(accountInfo.countryResidentialAddress)"
                     type="text"
                     class="mat-input"
                     placeholder="Country">
            </mat-form-field>
            <mat-form-field class="mat-form-field" appearance="outline">
              <mat-label>Street</mat-label>
              <input matInput
                     readonly="true"
                     formControlName="street"
                     [value]="checkEmpty(accountInfo.streetResidentialAddress)"
                     type="text"
                     class="mat-input"
                     placeholder="Street">
            </mat-form-field>
            <mat-form-field class="mat-form-field" appearance="outline">
              <mat-label>Email</mat-label>
              <input matInput
                     readonly="true"
                     formControlName="email"
                     [value]="checkEmpty(accountInfo.primaryEmail)"
                     type="text"
                     class="mat-input"
                     placeholder="Email">
            </mat-form-field>
          </div>
        </div>
      </div>
      <div class="col-md-6 col-lg-4 rank-block">
        <h3>Account Rank</h3>
        <div class="rank"
             [class.rank-silver]="accountInfo.tradeRank === tradeRankEnum.SILVER"
             [class.rank-gold]="accountInfo.tradeRank === tradeRankEnum.GOLD"
             [class.rank-platinum]="accountInfo.tradeRank === tradeRankEnum.PLATINUM">
          <p *ngIf="accountInfo.tradeRank === tradeRankEnum.SILVER">Silver</p>
          <p *ngIf="accountInfo.tradeRank === tradeRankEnum.GOLD">Gold</p>
          <p *ngIf="accountInfo.tradeRank === tradeRankEnum.PLATINUM">Platinum</p>
        </div>
        <mat-form-field>
          <mat-label>Rank</mat-label>
          <mat-select [value]="accountInfo.tradeRank" (selectionChange)="changeRank($event.value)">
            <mat-option [value]="tradeRankEnum.SILVER">Silver</mat-option>
            <mat-option [value]="tradeRankEnum.GOLD">Gold</mat-option>
            <mat-option [value]="tradeRankEnum.PLATINUM">Platinum</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </div>
    <hr>
    <h3>Account Details</h3>
    <div class="row">
      <div class="col-md-6 col-lg-4 form-group">
        <mat-form-field class="mat-form-field" appearance="outline">
          <mat-label>Account Number</mat-label>
          <input matInput
                 readonly="true"
                 formControlName="accountName"
                 [value]="checkEmpty(accountInfo.accountName)"
                 type="text"
                 class="mat-input"
                 placeholder="Account Number">
        </mat-form-field>
        <mat-form-field class="mat-form-field" appearance="outline">
          <mat-label>Account Type</mat-label>
          <input matInput
                 readonly="true"
                 formControlName="accountType"
                 [value]="checkEmpty(accountInfo.accountCapabilities)"
                 type="text"
                 class="mat-input"
                 placeholder="Account Type">
        </mat-form-field>
        <mat-form-field class="mat-form-field" appearance="outline">
          <mat-label>Date Opened</mat-label>
          <input matInput
                 readonly="true"
                 formControlName="dateOpened"
                 [value]="dateToString(accountInfo.dateOpened)"
                 type="text"
                 class="mat-input"
                 placeholder="Date Opened">
        </mat-form-field>
      </div>
      <div class="col-md-6 col-lg-4 form-group">
        <mat-form-field class="mat-form-field" appearance="outline">
          <mat-label>Currency</mat-label>
          <input matInput
                 readonly="true"
                 formControlName="currency"
                 [value]="checkEmpty(accountInfo.currency)"
                 type="text"
                 class="mat-input"
                 placeholder="Currency">
        </mat-form-field>
        <mat-form-field class="mat-form-field" appearance="outline">
          <mat-label>Customer Type</mat-label>
          <input matInput
                 readonly="true"
                 formControlName="customerType"
                 [value]="checkEmpty(accountInfo.customerType)"
                 type="text"
                 class="mat-input"
                 placeholder="Customer Type">
        </mat-form-field>
        <mat-form-field class="mat-form-field" appearance="outline">
          <mat-label>Date Funded</mat-label>
          <input matInput
                 readonly="true"
                 formControlName="dateFunded"
                 [value]="dateToString(accountInfo.dateFunded)"
                 type="text"
                 class="mat-input"
                 placeholder="Date Funded">
        </mat-form-field>
      </div>
      <div class="col-md-6 col-lg-4 form-group">
        <mat-form-field class="mat-form-field" appearance="outline">
          <mat-label>Cash</mat-label>
          <input matInput
                 readonly="true"
                 formControlName="cash"
                 type="text"
                 class="mat-input"
                 placeholder="Cash">
        </mat-form-field>
        <mat-form-field class="mat-form-field" appearance="outline">
          <mat-label>Master</mat-label>
          <input matInput
                 readonly="true"
                 formControlName="masterAccount"
                 [value]="checkEmpty(accountInfo.masterAccount)"
                 type="text"
                 class="mat-input"
                 placeholder="Master">
        </mat-form-field>
        <mat-form-field class="mat-form-field" appearance="outline">
          <mat-label>Date Closed</mat-label>
          <input matInput
                 readonly="true"
                 formControlName="dateClosed"
                 [value]="dateToString(accountInfo.dateClosed)"
                 type="text"
                 class="mat-input"
                 placeholder="Date Closed">
        </mat-form-field>
      </div>
    </div>
    <hr>
    <h3>Trading Permissions</h3>
    <div class="form-check-block">
      <mat-checkbox *ngFor="let pair of tradingPermissions"
                    color="primary"
                    (change)="discardChanges($event)"
                    [checked]="pair.value">{{pair.perm.name}}</mat-checkbox>
    </div>
  </div>
</form>
<hr>
<div class="row note-block">
  <div class="col-12 btns-group">
    <button mat-button class="btn btn--l-grey" (click)="addNote()">Add note</button>
  </div>
  <div class="col-12 title-inline">
    <h3>Notes:</h3>
  </div>
  <app-note class="col-md-12 note"
            *ngFor="let note of accountInfo.tradeAccountNotes"
            (deleteEvent)="deleteNote($event)"
            [tradeNote]="note">
  </app-note>
</div>

